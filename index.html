<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Nulis Jawa Ultra Cepat</title>
<style>
html,body{margin:0;padding:0;background:#222;color:#fff;text-align:center;font-family:sans-serif;overflow:hidden}
canvas{display:block;margin:auto;background:#f4f4f4;touch-action:none}
</style>
</head>
<body>
<canvas id="game" width="400" height="680"></canvas>

<audio id="sClick" src="tombolAksara.mp3" preload="auto"></audio>
<audio id="sBenar" src="benar.mp3" preload="auto"></audio>
<audio id="sSalah" src="salah.mp3" preload="auto"></audio>
<audio id="sHapus" src="hapus.mp3" preload="auto"></audio>
<audio id="sOver" src="gameOver.mp3" preload="auto"></audio>
<audio id="sFinish" src="applauseFINISH.mp3" preload="auto"></audio>

<script>
// === DATA ===
const latin=["IKI","IKU","IDU","IGA","IBU","INGU","URA","ULA","ULI","UPA","UJA","UJI","UGA","UGI","ECA","EKA","EWA","EKO","ORA","ORI"];
const jawa=["ꦲꦶꦏꦶ","ꦲꦶꦏꦸ","ꦲꦶꦢꦸ","ꦲꦶꦒ","ꦲꦶꦧꦸ","ꦲꦶꦔꦸ","ꦲꦸꦫ","ꦲꦸꦭ","ꦲꦸꦭꦶ","ꦲꦸꦥ","ꦲꦸꦗ","ꦲꦸꦗꦶ","ꦲꦸꦒ","ꦲꦸꦒꦶ","ꦲꦺꦕ","ꦲꦺꦏ","ꦲꦺꦮ","ꦲꦺꦏꦺꦴ","ꦲꦺꦴꦫ","ꦲꦺꦴꦫꦶ"];
const aksara=["ꦲ","ꦤ","ꦕ","ꦫ","ꦏ","ꦢ","ꦠ","ꦱ","ꦮ","ꦭ","ꦥ","ꦣ","ꦗ","ꦪ","ꦚ","ꦩ","ꦒ","ꦧ","ꦛ","ꦔ","ꦶ","ꦸ","ꦺ","ꦺꦴ","ꦼ","ꦉ","ꦊ","ꦂ","ꦁ","ꦃ","ꦿ","ꦽ","ꦾ","꧇","꧀"];

// === VARIABEL ===
let ctx=document.getElementById("game").getContext("2d");
let latinKata="",jawaKata="",typed="";
let waktu=180,nyawa=3,skor=0,aktif=true,timer;

// === AUDIO ===
const sClick=sClickEl("sClick"),sBenar=sClickEl("sBenar"),sSalah=sClickEl("sSalah"),
sHapus=sClickEl("sHapus"),sOver=sClickEl("sOver"),sFinish=sClickEl("sFinish");
function sClickEl(id){return document.getElementById(id);}
function play(s){try{s.currentTime=0;s.play();}catch(e){}}

// === FUNGSI ===
function kataBaru(){
  if(latin.length===0){selesai(true);return;}
  let i=Math.floor(Math.random()*latin.length);
  latinKata=latin.splice(i,1)[0];
  jawaKata=jawa.splice(i,1)[0];
  typed="";
  gambar();
}

function gambar(){
  ctx.clearRect(0,0,400,680);
  ctx.fillStyle="#000"; ctx.textAlign="center";
  ctx.font="16px Arial"; ctx.fillText(`Waktu:${waktu}s | Nyawa:${nyawa} | Skor:${skor}`,200,20);
  ctx.font="20px Arial"; ctx.fillText("Tulisan Latin:",200,60);
  ctx.font="26px Arial"; ctx.fillStyle="blue"; ctx.fillText(latinKata,200,90);
  ctx.fillStyle="#000"; ctx.font="20px Arial"; ctx.fillText("Tulisan Jawa:",200,130);
  ctx.fillStyle="blue"; ctx.font="34px 'nyk Ngayogyan New',sans-serif"; ctx.fillText(typed,200,170);

  // papan
  const col=5,size=60,gap=8,startX=40,startY=210;
  for(let i=0;i<aksara.length;i++){
    let x=startX+(i%col)*(size+gap);
    let y=startY+Math.floor(i/col)*(size+gap);
    ctx.fillStyle="#FEFDBC"; ctx.strokeStyle="#000"; ctx.lineWidth=2;
    ctx.beginPath(); ctx.roundRect(x,y,size,size,8); ctx.fill(); ctx.stroke();
    ctx.fillStyle="#000"; ctx.font="26px 'nyk Ngayogyan New',sans-serif"; ctx.fillText(aksara[i],x+size/2,y+size/2+4);
  }

  // tombol bawah
  ctx.fillStyle="#A00101"; ctx.fillRect(60,610,100,40);
  ctx.fillStyle="#055205"; ctx.fillRect(240,610,100,40);
  ctx.font="20px Arial"; ctx.fillStyle="#fff";
  ctx.fillText("GOSOK",110,630); ctx.fillText("KIRIM",290,630);
}

function klik(x,y){
  if(!aktif)return;
  // tombol bawah
  if(y>610 && y<650){
    if(x>60&&x<160){ if(typed.length){typed=typed.slice(0,-1);play(sHapus);gambar();} }
    else if(x>240&&x<340){
      if(typed===jawaKata){skor++;play(sBenar);kataBaru();}
      else{nyawa--;play(sSalah); if(nyawa<=0)selesai(false); else gambar();}
    }
    return;
  }
  // huruf
  const col=5,size=60,gap=8,startX=40,startY=210;
  for(let i=0;i<aksara.length;i++){
    let bx=startX+(i%col)*(size+gap);
    let by=startY+Math.floor(i/col)*(size+gap);
    if(x>bx&&x<bx+size&&y>by&&y<by+size){
      typed+=aksara[i];play(sClick);gambar();return;
    }
  }
}

function selesai(menang){
  aktif=false; clearInterval(timer);
  ctx.fillStyle=menang?"#CCF7F5":"#FFC4C4"; ctx.fillRect(0,0,400,680);
  ctx.fillStyle="#000"; ctx.textAlign="center";
  ctx.font="32px Arial"; ctx.fillText(menang?"Game Selesai":"Game Over",200,300);
  ctx.font="24px Arial"; ctx.fillText(`Skor: ${(skor/latin.length*100).toFixed(1)}`,200,340);
  ctx.font="18px Arial"; ctx.fillText("Refresh kanggo main maneh",200,380);
  play(menang?sFinish:sOver);
}

function mulai(){
  kataBaru();
  timer=setInterval(()=>{
    if(!aktif)return;
    waktu--;
    if(waktu<=0){selesai(false);}
    else gambar();
  },1000);
  gambar();
}

document.getElementById("game").addEventListener("click",e=>{
  let r=e.target.getBoundingClientRect();
  klik(e.clientX-r.left,e.clientY-r.top);
});

window.onload=mulai;
</script>
</body>
</html>
