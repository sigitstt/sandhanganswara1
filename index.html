<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Nulis Jawa (Cepat)</title>
<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    background: #f4f4f4;
}
h1, h2 { color: #333; margin: 10px 0; }
.info {
    background: #333; color: #fff; padding: 8px;
}
.output, .output1, .output2 {
    margin: 8px 0;
    font-family: 'nyk Ngayogyan New', sans-serif;
}
.output { font-size: 22px; }
.output1 { font-size: 26px; color: blue; }
.output2 { font-size: 30px; color: blue; min-height: 40px; }
canvas {
    background: #FEFDBC;
    margin: 10px auto;
    display: block;
    border: 2px solid #000;
    border-radius: 10px;
}
.controls {
    display: flex; justify-content: center; gap: 15px; margin-top: 15px;
}
button {
    padding: 10px 20px;
    font-size: 16px;
    color: white;
    border-radius: 8px;
    border: 2px solid #333;
}
#deleteButton { background: #A00101; }
#confirmButton { background: #055205; }
</style>
</head>
<body>

<h1>Game Nulis Jawa</h1>
<h2>(Versi Cepat Android)</h2>

<div class="info" id="gameInfo">
    <span id="time">Wektu: 600 s</span> | 
    <span id="lives">Nyawa: 3</span> | 
    <span id="score">Skor: 0</span>
</div>

<div class="output">Tulisan Latin:</div>
<div class="output1" id="latinWord"></div>
<div class="output">Tulisan Jawa:</div>
<div class="output2" id="jawaWord"></div>

<canvas id="board" width="330" height="480"></canvas>

<div class="controls">
    <button id="deleteButton">GOSOK</button>
    <button id="confirmButton">KIRIM</button>
</div>

<audio id="audioClick" src="tombolAksara.mp3" preload="auto"></audio>
<audio id="audioBenar" src="benar.mp3" preload="auto"></audio>
<audio id="audioSalah" src="salah.mp3" preload="auto"></audio>
<audio id="audioHapus" src="hapus.mp3" preload="auto"></audio>

<script>
const latinWords = ["IKI","IKU","IDU","IBU","INGU","ULA","UPA","ECA","EKA","EKO"];
const jawaWords  = ["ꦲꦶꦏꦶ","ꦲꦶꦏꦸ","ꦲꦶꦢꦸ","ꦲꦶꦧꦸ","ꦲꦶꦔꦸ","ꦲꦸꦭ","ꦲꦸꦥ","ꦲꦺꦕ","ꦲꦺꦏ","ꦲꦺꦏꦺꦴ"];
const letters = ["ꦲ","ꦤ","ꦕ","ꦫ","ꦏ","ꦢ","ꦠ","ꦱ","ꦮ","ꦭ",
"ꦥ","ꦗ","ꦪ","ꦩ","ꦒ","ꦧ","ꦔ","ꦶ","ꦸ","ꦺ","ꦺꦴ","ꦼ","ꦉ"];

let currentLatin="", currentJawa="", timeLeft=600, score=0, lives=3, timer;
const latinWordEl = document.getElementById("latinWord");
const jawaWordEl  = document.getElementById("jawaWord");
const timeEl      = document.getElementById("time");
const scoreEl     = document.getElementById("score");
const livesEl     = document.getElementById("lives");

const clickSound  = document.getElementById("audioClick");
const benarSound  = document.getElementById("audioBenar");
const salahSound  = document.getElementById("audioSalah");
const hapusSound  = document.getElementById("audioHapus");

const canvas = document.getElementById("board");
const ctx = canvas.getContext("2d");
const btnSize = 60, gap = 5;
const cols = 5;

function play(snd) {
    try { snd.currentTime=0; snd.play(); } catch(e){}
}

function drawBoard() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.font = "30px 'nyk Ngayogyan New'";
    ctx.textAlign="center"; ctx.textBaseline="middle";
    for (let i=0;i<letters.length;i++) {
        const x = (i % cols) * (btnSize+gap) + btnSize/2 + 10;
        const y = Math.floor(i/cols)*(btnSize+gap) + btnSize/2 + 10;
        ctx.fillStyle="#FEFDBC";
        ctx.strokeStyle="#000";
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.roundRect(x-btnSize/2,y-btnSize/2,btnSize,btnSize,8);
        ctx.fill();
        ctx.stroke();
        ctx.fillStyle="#000";
        ctx.fillText(letters[i], x, y+3);
    }
}

function getLetterAt(x,y){
    for (let i=0;i<letters.length;i++){
        const cx = (i % cols)*(btnSize+gap)+10;
        const cy = Math.floor(i/cols)*(btnSize+gap)+10;
        if (x>cx && x<cx+btnSize && y>cy && y<cy+btnSize) return letters[i];
    }
    return null;
}

canvas.addEventListener("click", e=>{
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const letter = getLetterAt(x,y);
    if(letter){
        jawaWordEl.textContent += letter;
        play(clickSound);
    }
});

document.getElementById("deleteButton").onclick = ()=>{
    jawaWordEl.textContent = jawaWordEl.textContent.slice(0,-1);
    play(hapusSound);
};
document.getElementById("confirmButton").onclick = ()=>{
    if(jawaWordEl.textContent === currentJawa){
        score++;
        play(benarSound);
        scoreEl.textContent = `Skor: ${(score/latinWords.length*100).toFixed(1)}`;
        nextWord();
    } else {
        lives--;
        play(salahSound);
        livesEl.textContent = `Nyawa: ${lives}`;
        if(lives<=0) endGame(false);
    }
};

function nextWord(){
    if(latinWords.length===0) return endGame(true);
    const i=Math.floor(Math.random()*latinWords.length);
    currentLatin=latinWords.splice(i,1)[0];
    currentJawa=jawaWords.splice(i,1)[0];
    latinWordEl.textContent=currentLatin;
    jawaWordEl.textContent="";
}

function tick(){
    timeLeft--;
    timeEl.textContent=`Wektu: ${timeLeft} s`;
    if(timeLeft<=0){ endGame(false); return; }
    timer=setTimeout(tick,1000);
}

function endGame(finish){
    clearTimeout(timer);
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle=finish?"#CFF":"#FCC";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="#000";
    ctx.font="24px Arial";
    ctx.textAlign="center";
    ctx.fillText(finish?"Game Finish":"Game Over",canvas.width/2,canvas.height/2-20);
    ctx.fillText(`Skor: ${(score/10*100).toFixed(1)}`,canvas.width/2,canvas.height/2+10);
    ctx.fillText("Refresh kanggo main maneh",canvas.width/2,canvas.height/2+40);
}

function start(){
    drawBoard();
    nextWord();
    tick();
}

window.onload=start;
</script>
</body>
</html>
