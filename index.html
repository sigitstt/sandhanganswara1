<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Nulis Jawa Super Cepat</title>
<style>
html, body {
  margin: 0; padding: 0; background: #222;
  color: #fff; font-family: sans-serif;
  overflow: hidden; touch-action: manipulation;
}
canvas {
  display: block; margin: auto;
  background: #f4f4f4;
  touch-action: none;
}
</style>
</head>
<body>
<canvas id="game" width="360" height="640"></canvas>

<script>
const cvs = document.getElementById('game');
const ctx = cvs.getContext('2d');
ctx.textAlign = "center";
ctx.textBaseline = "middle";

const letters = ["ꦲ","ꦤ","ꦕ","ꦫ","ꦏ","ꦢ","ꦠ","ꦱ","ꦮ","ꦭ",
"ꦥ","ꦗ","ꦪ","ꦩ","ꦒ","ꦧ","ꦔ","ꦶ","ꦸ","ꦺ","ꦺꦴ","ꦼ","ꦉ"];
const latinWords = ["IKI","IKU","IBU","ULA","UPA","EKA","EKO","ORA","NIKI","NUTU"];
const jawaWords  = ["ꦲꦶꦏꦶ","ꦲꦶꦏꦸ","ꦲꦶꦧꦸ","ꦲꦸꦭ","ꦲꦸꦥ","ꦲꦺꦏ","ꦲꦺꦏꦺꦴ","ꦲꦺꦴꦫ","ꦤꦶꦏꦶ","ꦤꦸꦠꦸ"];

let currentLatin="", currentJawa="", typed="";
let timeLeft = 600, score = 0, lives = 3;
let running = true;

function pickWord() {
  if (!latinWords.length) return finish(true);
  const i = Math.floor(Math.random()*latinWords.length);
  currentLatin = latinWords.splice(i,1)[0];
  currentJawa  = jawaWords.splice(i,1)[0];
  typed = "";
}
pickWord();

function beep(freq=600,dur=100){
  try {
    const ctxA = new (window.AudioContext||window.webkitAudioContext)();
    const osc = ctxA.createOscillator();
    const gain = ctxA.createGain();
    osc.type='square'; osc.frequency.value=freq;
    osc.connect(gain); gain.connect(ctxA.destination);
    osc.start();
    gain.gain.setValueAtTime(0.1,ctxA.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001,ctxA.currentTime+dur/1000);
    osc.stop(ctxA.currentTime+dur/1000);
  } catch(e){}
}

function drawText(t,x,y,size=24,color="#000"){
  ctx.fillStyle=color;
  ctx.font=size+"px 'nyk Ngayogyan New', sans-serif";
  ctx.fillText(t,x,y);
}

function drawUI(){
  ctx.clearRect(0,0,cvs.width,cvs.height);
  // header
  drawText(`Wektu: ${timeLeft}s  Nyawa:${lives}  Skor:${score}`,180,20,16,"#000");
  // latin
  drawText("Tulisan Latin:",180,60,18,"#000");
  drawText(currentLatin,180,90,30,"blue");
  // jawa
  drawText("Tulisan Jawa:",180,140,18,"#000");
  drawText(typed,180,180,34,"#000");
  // board
  const size=60,gap=8,cols=5;
  let x0=30,y0=230;
  for(let i=0;i<letters.length;i++){
    const x=x0+(i%cols)*(size+gap);
    const y=y0+Math.floor(i/cols)*(size+gap);
    ctx.fillStyle="#FEFDBC";
    ctx.strokeStyle="#000";
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.roundRect(x,y,size,size,8);
    ctx.fill(); ctx.stroke();
    drawText(letters[i],x+size/2,y+size/2,28,"#000");
  }
  // buttons
  ctx.fillStyle="#A00101"; ctx.fillRect(50,580,100,40);
  ctx.fillStyle="#055205"; ctx.fillRect(210,580,100,40);
  drawText("GOSOK",100,600,20,"#fff");
  drawText("KIRIM",260,600,20,"#fff");
}

function getClick(x,y){
  // tombol bawah
  if (y>580 && y<620){
    if (x<160){ // delete
      typed=typed.slice(0,-1); beep(200);
    } else { // confirm
      if (typed===currentJawa){
        score++; beep(800);
        pickWord();
      } else {
        lives--; beep(100);
        if(lives<=0) finish(false);
      }
    }
    return;
  }
  // huruf
  const size=60,gap=8,cols=5;
  let x0=30,y0=230;
  for(let i=0;i<letters.length;i++){
    const bx=x0+(i%cols)*(size+gap);
    const by=y0+Math.floor(i/cols)*(size+gap);
    if (x>bx && x<bx+size && y>by && y<by+size){
      typed+=letters[i];
      beep(400);
      return;
    }
  }
}

cvs.addEventListener("click",e=>{
  if(!running) return;
  const rect=cvs.getBoundingClientRect();
  const x=e.clientX-rect.left;
  const y=e.clientY-rect.top;
  getClick(x,y);
});

function tick(){
  if(!running) return;
  timeLeft--;
  if(timeLeft<=0) finish(false);
}

function finish(win){
  running=false;
  ctx.fillStyle=win?"#CCF7F5":"#FFC4C4";
  ctx.fillRect(0,0,cvs.width,cvs.height);
  drawText(win?"Game Finish":"Game Over",180,300,36,"#000");
  drawText(`Skor: ${(score/10*100).toFixed(1)}`,180,350,28,"#000");
  drawText("Refresh kanggo main maneh",180,400,18,"#000");
  beep(win?800:200,300);
}

function loop(){
  drawUI();
  requestAnimationFrame(loop);
}
setInterval(tick,1000);
loop();
</script>
</body>
</html>
