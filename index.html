<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Nulis Jawa</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }
    h1, h2 { margin-top: 10px; color: #333; }
    .game-board {
        display: grid;
        grid-template-columns: repeat(5, 60px);
        gap: 8px;
        justify-content: center;
        margin: 20px 0;
    }
    .button {
        width: 60px; height: 60px;
        background-color: #FEFDBC;
        border: 2px solid #000;
        display: flex; align-items: center; justify-content: center;
        font-size: 24px;
        font-family: 'nyk Ngayogyan New', sans-serif;
        color: #333;
        cursor: pointer;
        border-radius: 8px;
        transition: transform 0.1s ease;
        user-select: none;
    }
    .button:active { transform: translateY(3px); }
    .controls {
        display: flex; justify-content: center;
        gap: 20px; margin-top: 15px;
    }
    .control-button {
        padding: 10px 20px;
        border: 2px solid #333;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        color: #fff;
        background-color: #055205;
        transition: transform 0.1s ease;
    }
    .control-button.delete { background-color: #A00101; }
    .control-button:active { transform: translateY(3px); }
    .info {
        margin-top: 10px;
        font-size: 18px;
        background-color: #333;
        padding: 10px;
        color: white;
    }
    .output, .output1, .output2 {
        font-family: 'nyk Ngayogyan New', sans-serif;
        margin: 8px 0;
    }
    .output { font-size: 22px; }
    .output1 { font-size: 26px; color: blue; }
    .output2 { font-size: 30px; color: blue; min-height: 40px; }
</style>
</head>
<body>
<h1>Game Nulis Jawa</h1>
<h2>(Sandhangan Swara)</h2>

<div class="info" id="gameInfo">
    <span id="time">Wektu: 600 s</span> | 
    <span id="lives">Nyawa: 3</span> | 
    <span id="score">Skor: 0</span>
</div>

<div class="output">Tulisan Latin :</div>
<div class="output1" id="latinWord"></div>
<div class="output">Tulisan Jawa :</div>
<div class="output2" id="jawaWord"></div>

<div class="game-board" id="jawaBoard"></div>

<div class="controls">
    <button class="control-button delete" id="deleteButton">GOSOK</button>
    <button class="control-button confirm" id="confirmButton">KIRIM</button>
</div>

<audio id="audioTombolAksara" src="tombolAksara.mp3" preload="auto"></audio>
<audio id="audioBenar" src="benar.mp3" preload="auto"></audio>
<audio id="audioSalah" src="salah.mp3" preload="auto"></audio>
<audio id="audioHapus" src="hapus.mp3" preload="auto"></audio>
<audio id="audioGameOver" src="gameOver.mp3" preload="auto"></audio>
<audio id="audioFinish" src="applauseFINISH.mp3" preload="auto"></audio>

<script>
const latinWords = ["IKI","IKU","IDU","IGA","IBU","INGU","URA","ULA","ULI","UPA",
"UJA","UJI","UGA","UGI","ECA","EKA","EWA","EKO","ORA","ORI",
"EDI","NIKI","NITI","NIRA","NIKA","NIBA","NUHONI","NURI","NURU","NUTU",
"NUSA","NEDHA","NEKA","NELA","NERAKA","CIRI","CINA","CELANA","CETHA","RAHINA",
"RADI","RINA","RIKA","RIYAYA","RUPA","RENA","RECA","REKA","REGA","REGI",
"REGU","REMA","REJA","KADI","KALI","KAPI","KAJI","KINA","KIRA","KUNA"];
const jawaWords = ["ꦲꦶꦏꦶ","ꦲꦶꦏꦸ","ꦲꦶꦢꦸ","ꦲꦶꦒ","ꦲꦶꦧꦸ","ꦲꦶꦔꦸ","ꦲꦸꦫ","ꦲꦸꦭ","ꦲꦸꦭꦶ","ꦲꦸꦥ",
"ꦲꦸꦗ","ꦲꦸꦗꦶ","ꦲꦸꦒ","ꦲꦸꦒꦶ","ꦲꦺꦕ","ꦲꦺꦏ","ꦲꦺꦮ","ꦲꦺꦏꦺꦴ","ꦲꦺꦴꦫ","ꦲꦺꦴꦫꦶ",
"ꦲꦺꦢꦶ","ꦤꦶꦏꦶ","ꦤꦶꦠꦶ","ꦤꦶꦫ","ꦤꦶꦏ","ꦤꦶꦧ","ꦤꦸꦲꦺꦴꦤꦶ","ꦤꦸꦫꦶ","ꦤꦸꦫꦸ","ꦤꦸꦠꦸ",
"ꦤꦸꦱ","ꦤꦼꦣ","ꦤꦺꦏ","ꦤꦼꦭ","ꦤꦼꦫꦏ","ꦕꦶꦫꦶ","ꦕꦶꦤ","ꦕꦼꦭꦤ","ꦕꦼꦛ","ꦫꦲꦶꦤ",
"ꦫꦢꦶ","ꦫꦶꦤ","ꦫꦶꦏ","ꦫꦶꦪꦪ","ꦫꦸꦥ","ꦉꦤ","ꦉꦕ","ꦫꦺꦏ","ꦉꦒ","ꦉꦒꦶ",
"ꦉꦒꦸ","ꦫꦺꦩ","ꦉꦗ","ꦏꦢꦶ","ꦏꦭꦶ","ꦏꦥꦶ","ꦏꦗꦶ","ꦏꦶꦤ","ꦏꦶꦫ","ꦏꦸꦤ"];
const jawaLetters = ["ꦲ","ꦤ","ꦕ","ꦫ","ꦏ","ꦢ","ꦠ","ꦱ","ꦮ","ꦭ",
"ꦥ","ꦣ","ꦗ","ꦪ","ꦚ","ꦩ","ꦒ","ꦧ","ꦛ","ꦔ",
"ꦶ","ꦸ","ꦺ","ꦺꦴ","ꦼ","ꦉ","ꦊ","ꦂ","ꦁ","ꦃ",
"ꦿ","ꦽ","ꦾ"];

let currentLatin = "", currentJawa = "";
let timeLeft = 600, score = 0, lives = 3, timerId = null;

const latinWordEl = document.getElementById("latinWord");
const jawaWordEl = document.getElementById("jawaWord");
const timeEl = document.getElementById("time");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const jawaBoard = document.getElementById("jawaBoard");

const sounds = {
    key: document.getElementById("audioTombolAksara"),
    correct: document.getElementById("audioBenar"),
    wrong: document.getElementById("audioSalah"),
    delete: document.getElementById("audioHapus"),
    gameover: document.getElementById("audioGameOver"),
    finish: document.getElementById("audioFinish")
};

function playSound(sound) {
    if (!sound.paused) { sound.pause(); }
    sound.currentTime = 0;
    sound.play().catch(()=>{});
}

function chooseNewWord() {
    if (latinWords.length === 0) return gameFinish();
    const i = Math.floor(Math.random() * latinWords.length);
    currentLatin = latinWords.splice(i, 1)[0];
    currentJawa = jawaWords.splice(i, 1)[0];
    latinWordEl.textContent = currentLatin;
    jawaWordEl.textContent = "";
}

function createJawaBoard() {
    const fragment = document.createDocumentFragment();
    jawaLetters.forEach(l => {
        const btn = document.createElement("div");
        btn.className = "button";
        btn.textContent = l;
        btn.addEventListener("click", () => {
            jawaWordEl.textContent += l;
            playSound(sounds.key);
        });
        fragment.appendChild(btn);
    });
    jawaBoard.appendChild(fragment);
}

document.getElementById("confirmButton").onclick = () => {
    if (jawaWordEl.textContent.trim() === currentJawa) {
        score++;
        playSound(sounds.correct);
        scoreEl.textContent = `Skor: ${(score/60*100).toFixed(1)}`;
        chooseNewWord();
    } else {
        lives--;
        playSound(sounds.wrong);
        livesEl.textContent = `Nyawa: ${lives}`;
        if (lives <= 0) gameOver();
    }
};

document.getElementById("deleteButton").onclick = () => {
    jawaWordEl.textContent = jawaWordEl.textContent.slice(0, -1);
    playSound(sounds.delete);
};

function updateTimer() {
    timeLeft--;
    timeEl.textContent = `Wektu: ${timeLeft} s`;
    if (timeLeft <= 0) return gameOver();
    timerId = setTimeout(updateTimer, 1000);
}

function startGame() {
    createJawaBoard();
    chooseNewWord();
    timerId = setTimeout(updateTimer, 1000);
}

function hideGameElements() {
    document.querySelectorAll("#gameInfo, #jawaBoard, .controls, .output, .output1, .output2")
        .forEach(el => el.style.display = "none");
}

function showMessage(title, color, sound, text, scoreValue) {
    hideGameElements();
    playSound(sound);
    const box = document.createElement("div");
    Object.assign(box.style, {
        position: "fixed", top: "30%", left: "50%",
        transform: "translate(-50%, -50%)",
        backgroundColor: color, padding: "20px",
        boxShadow: "0 4px 8px rgba(0,0,0,0.2)",
        textAlign: "center"
    });
    box.innerHTML = `
        <h1>${title}</h1>
        <h2>Skor Anda:</h2>
        <h1>${(scoreValue).toFixed(1)}</h1>
        ${text}
    `;
    document.body.appendChild(box);
}

function gameOver() {
    clearTimeout(timerId);
    showMessage("Game Over", "#FFC4C4", sounds.gameover,
        "<h3>Sabar nggih ...</h3><h3>kanggo main maneh</h3><h2>Refresh halaman!</h2>",
        score/60*100);
}

function gameFinish() {
    clearTimeout(timerId);
    showMessage("Game Finish", "#CCF7F5", sounds.finish,
        "<h3>Alhamdulillah ...</h3><h3>kanggo main maneh</h3><h2>Refresh halaman!</h2>",
        score/60*100);
}

window.onload = startGame;
</script>
</body>
</html>
